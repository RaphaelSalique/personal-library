version: '3'
services:
    db:
      image: mysql:5
      ports:
        - "3307:3306"
      environment:
        MYSQL_ALLOW_EMPTY_PASSWORD: 'yes'
        MYSQL_USER: 'root'
      volumes:
        - ./mysql:/var/lib/mysql

    maildev:
        image: djfarrelly/maildev
        ports:
          - "8002:80"

    phpmyadmin:
        image: phpmyadmin/phpmyadmin
        ports:
            - "8080:80"
        depends_on:
            - db
        environment:
          PMA_HOST: db

    php72:
        build: ./docker/php72
        ports:
            - "9172:80"
        volumes:
            - ./docker/vhosts:/etc/apache2/sites-enabled
            - ./personal-library:/var/www/personal-library
